pipeline {

    agent any
    options {
        ansiColor('xterm')
    }

    stages {

        stage('Unit Testing') {
            steps {
                sh """
                echo "Running Unit Tests"
                """
            }
        }

        stage('Code Analysis') {
            steps {
                sh """
                echo "Running Code Analysis"
                """
            }
        }
        stage('User mode') {
            steps {
                input message: 'Do you want to proceed with OPatch in report mode, Just prints out the actions without executing?', ok: 'Yes',
                parameters: [booleanParam(name: 'enable', defaultValue: false)]
                script {
                    if(params.enable) {
                        sh """
                        echo "Building Artifact"
                        """

                        sh """
                        echo "Deploying Code"
                        """
                    }
                }
            }
        }

        stage('Build Deploy Code') {
            when {
                branch 'devops'
            }
            steps {
                sh """
                echo "Building Artifact"
                """

                sh """
                echo "Deploying Code"
                """
            }
        }

    }   
}