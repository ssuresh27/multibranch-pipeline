pipeline {

    agent any
    options {
        ansiColor('xterm')
    }

    stages {

        stage('Unit Testing') {
            steps {
                sh """
                echo "Running Unit Tests"
                """
            }
        }

        stage('Code Analysis') {
            steps {
                sh """
                echo "Running Code Analysis"
                """
            }
        }
        stage('User mode') {
            steps {
                script {
                    // Define Variable
                    def USER_INPUT = input(
                    message: 'User input required - Some Yes or No question?',
                    parameters: [
                            [$class: 'ChoiceParameterDefinition',
                             choices: ['no','yes'].join('\n'),
                             name: 'input',
                             description: 'Menu - select box option']
                    ])

                echo "The answer is: ${USER_INPUT}"

                if( "${USER_INPUT}" == "yes"){
                    sh """
                    echo "Running YES Code"
                    """
                } 
                else {
                    sh """
                    echo "Running NO Code"
                    """
                }
            }
            }
        }

        stage('Build Deploy Code') {
            when {
                branch 'devops'
            }
            steps {
                sh """
                echo "Building Artifact"
                """

                sh """
                echo "Deploying Code"
                """
            }
        }

    }   
}